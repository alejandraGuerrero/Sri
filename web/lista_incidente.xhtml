<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:f="http://java.sun.com/jsf/core"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:a4j="http://richfaces.org/a4j"
                 xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Registro Incidencia</title>
        <link href="#{facesContext.externalContext.requestContextPath}/resorces/style.css" rel="stylesheet" type="text/css"/>   
    </h:head>
    <h:body>
        <br/>
        <br/>
        <br/>
        <h:form id="formlistarincidente">
            <p:dataTable id="datatablelistaincidente"  var="incidente" value="#{Controlador.listaIncidentes}" paginator="true" rows="10"  
                         >  

                <f:facet name="header">  
                    INCIDENTES
                </f:facet>  

                <p:column headerText="Codigo" style="width:25%">  
                    <h:outputText  rendered="#{!Controlador.boolEditar}" value="#{incidente.inc_codigoIncidente}"/> 
                    <h:inputText disabled="true"  rendered="#{Controlador.boolEditar}"  value="#{incidente.inc_codigoIncidente}"/> 
                </p:column>  

                <p:column headerText="DescripciÃ³n" style="width:25%">  
                    <h:outputText  rendered="#{!Controlador.boolEditar}" value="#{incidente.inc_descripcionIncidente}"/> 
                    <h:inputText  rendered="#{Controlador.boolEditar}" value="#{incidente.inc_descripcionIncidente}"/> 
                </p:column>  

                <p:column headerText="Fecha" style="width:24%">  
                    <h:outputText rendered="#{!Controlador.boolEditar}" value="#{incidente.inc_fechaIncidente}">
                        <f:convertDateTime timeZone="America/Bogota" pattern="yyyy-MM-dd HH:mm:ss"/>
                    </h:outputText>  
                    <h:inputText disabled="true" rendered="#{Controlador.boolEditar}" value="#{incidente.inc_fechaIncidente}">
                        <f:convertDateTime timeZone="America/Bogota" pattern="yyyy-MM-dd HH:mm:ss"/>
                    </h:inputText>
                </p:column>  


                <p:column headerText="Tipo Incidente" style="width:24%">  
                    <h:outputText  rendered="#{!Controlador.boolEditar}" value="#{incidente.tipo_incidente.tipinc_descripcion}"/> 
                    <h:inputText  rendered="#{Controlador.boolEditar}" value="#{car.inc_descripcion}"/> 
                </p:column>  

                <p:column headerText="Barrio" style="width:24%">  
                    <h:outputText  rendered="#{!Controlador.boolEditar}" value="#{incidente.barrio.bar_nombre}"/> 
                    <h:inputText disabled="true" rendered="#{Controlador.boolEditar}" value="#{incidente.barrio.bar_nombre}"/> 
                </p:column>

                <p:column headerText="Comuna" style="width:24%">  
                    <h:outputText  rendered="#{!Controlador.boolEditar}" value="#{incidente.barrio.comuna}"/> 
                    <h:inputText disabled="true" rendered="#{Controlador.boolEditar}" value="#{incidente.barrio.comuna}"/> 
                </p:column>  

                <p:column headerText="Usuario Registro" style="width:24%">  
                    <h:outputText rendered="#{!Controlador.boolEditar}"  /> 
                    <h:inputText rendered="#{Controlador.boolEditar}"   /> 
                </p:column>  

                <p:column rendered="#{!Controlador.boolEditar}" headerText="Editar"  style="width:24%">  
                    <p:commandButton immediate="true" update="datatablelistaincidente" action="#{Controlador.editarInidente()}" value="Editar" /> 
                </p:column> 
                
                 <p:column rendered="#{Controlador.boolEditar}" headerText="Editar"  style="width:24%">  
                     <p:commandButton  update="datatablelistaincidente" action="#{Controlador.actualizarIncidente()}" value="Guardar" /> 
                     <p:commandButton  update="datatablelistaincidente" action="#{Controlador.cancelarActualizarIncidente()}" value="Cancelar" /> 
                </p:column> 

                <p:column rendered="#{!Controlador.boolEditar}" headerText="Eliminar" style="width:24%">  
                    <p:commandButton  immediate="true" update="datatablelistaincidente" value="Eliminar"
                                       action="#{Controlador.eliminarIncidente(incidente)}"/>
                </p:column> 

            </p:dataTable> 



        </h:form>
    </h:body>
</ui:composition>
